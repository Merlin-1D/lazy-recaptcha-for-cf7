{"version":3,"file":"index.js","names":["document","addEventListener","sitekey","recaptcha_params","actions","inputs","querySelectorAll","executeRecaptcha","action","grecaptcha","ready","execute","then","token","token_inputs","i","length","item","value","recaptchaEvent","CustomEvent","detail","dispatchEvent","loadRecaptchaScript","bind","callback","head","querySelector","script","createElement","type","onload","src","appendChild","input","contactform"],"sources":["../src/index.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\tlet sitekey = recaptcha_params.sitekey;\n\tlet actions = recaptcha_params.actions;\n\tlet inputs = document.querySelectorAll('input, textarea');\n\n\tfunction executeRecaptcha(action) {\n\t\tif (typeof grecaptcha !== \"undefined\") {\n\t\t\tgrecaptcha.ready(function () {\n\t\t\t\tgrecaptcha.execute(sitekey, {action: action})\n\t\t\t\t\t.then(function (token) {\n\t\t\t\t\t\tlet token_inputs = document.querySelectorAll('form.wpcf7-form input[name=\"_wpcf7_recaptcha_response\"]');\n\t\t\t\t\t\tfor (let i = 0; i < token_inputs.length; i++) {\n\t\t\t\t\t\t\ttoken_inputs.item(i).value = token;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet recaptchaEvent = new CustomEvent('wpcf7grecaptchaexecuted', {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\taction: action,\n\t\t\t\t\t\t\t\ttoken: token\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdocument.dispatchEvent(recaptchaEvent);\n\t\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tloadRecaptchaScript(executeRecaptcha.bind(this, action));\n\t\t}\n\t}\n\n\tfunction loadRecaptchaScript(callback) {\n\t\tlet head = document.querySelector('head');\n\t\tlet script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.onload = callback;\n\t\tscript.src = 'https://www.google.com/recaptcha/api.js?render=' + sitekey;\n\t\thead.appendChild(script);\n\t}\n\n\t// Ініціалізація за дією \"homepage\"\n\t// executeRecaptcha(actions.homepage);\n\n\tif (inputs.length > 0) {\n\t\tfor (const input of inputs) {\n\t\t\tinput.addEventListener('change', () => {\n\t\t\t\texecuteRecaptcha(actions.contactform);\n\t\t\t});\n\t\t}\n\t}\n});\n"],"mappings":";;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EACnD,IAAIC,OAAO,GAAGC,gBAAgB,CAACD,OAAO;EACtC,IAAIE,OAAO,GAAGD,gBAAgB,CAACC,OAAO;EACtC,IAAIC,MAAM,GAAGL,QAAQ,CAACM,gBAAgB,CAAC,iBAAiB,CAAC;EAEzD,SAASC,gBAAgBA,CAACC,MAAM,EAAE;IACjC,IAAI,OAAOC,UAAU,KAAK,WAAW,EAAE;MACtCA,UAAU,CAACC,KAAK,CAAC,YAAY;QAC5BD,UAAU,CAACE,OAAO,CAACT,OAAO,EAAE;UAACM,MAAM,EAAEA;QAAM,CAAC,CAAC,CAC3CI,IAAI,CAAC,UAAUC,KAAK,EAAE;UACtB,IAAIC,YAAY,GAAGd,QAAQ,CAACM,gBAAgB,CAAC,yDAAyD,CAAC;UACvG,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,YAAY,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;YAC7CD,YAAY,CAACG,IAAI,CAACF,CAAC,CAAC,CAACG,KAAK,GAAGL,KAAK;UACnC;UAEA,IAAIM,cAAc,GAAG,IAAIC,WAAW,CAAC,yBAAyB,EAAE;YAC/DC,MAAM,EAAE;cACPb,MAAM,EAAEA,MAAM;cACdK,KAAK,EAAEA;YACR;UACD,CAAC,CAAC;UAEFb,QAAQ,CAACsB,aAAa,CAACH,cAAc,CAAC;QACvC,CAAC,CAAC;MACJ,CAAC,CAAC;IACH,CAAC,MAAM;MACNI,mBAAmB,CAAChB,gBAAgB,CAACiB,IAAI,CAAC,IAAI,EAAEhB,MAAM,CAAC,CAAC;IACzD;EACD;EAEA,SAASe,mBAAmBA,CAACE,QAAQ,EAAE;IACtC,IAAIC,IAAI,GAAG1B,QAAQ,CAAC2B,aAAa,CAAC,MAAM,CAAC;IACzC,IAAIC,MAAM,GAAG5B,QAAQ,CAAC6B,aAAa,CAAC,QAAQ,CAAC;IAC7CD,MAAM,CAACE,IAAI,GAAG,iBAAiB;IAC/BF,MAAM,CAACG,MAAM,GAAGN,QAAQ;IACxBG,MAAM,CAACI,GAAG,GAAG,iDAAiD,GAAG9B,OAAO;IACxEwB,IAAI,CAACO,WAAW,CAACL,MAAM,CAAC;EACzB;;EAEA;EACA;;EAEA,IAAIvB,MAAM,CAACW,MAAM,GAAG,CAAC,EAAE;IACtB,KAAK,MAAMkB,KAAK,IAAI7B,MAAM,EAAE;MAC3B6B,KAAK,CAACjC,gBAAgB,CAAC,QAAQ,EAAE,MAAM;QACtCM,gBAAgB,CAACH,OAAO,CAAC+B,WAAW,CAAC;MACtC,CAAC,CAAC;IACH;EACD;AACD,CAAC,CAAC"}